import{u as A,a as D,b as f,r as d,R as g,c as P,j as e,F as B,d as I,e as x,G as r,S as i,I as p,O as h,f as j,g as L,h as T,E as M,i as N,k as z,B as V,C as W,l as G,m as H,s as $,A as J,T as S,L as K}from"./index-o2MqoJ-O.js";const Q=()=>{A(),D();const a=f(),[y,v]=d.useState(!1),[w,k]=d.useState(!1),[E,C]=d.useState(""),[O,u]=d.useState(!1),[c,q]=g.useState(!1),F=()=>{q(!c)},R=s=>{s.preventDefault()};return P(s=>s.session.server),e.jsxs(g.Fragment,{children:[e.jsx(B,{initialValues:{name:"",email:"",password:""},validationSchema:I().shape({name:x().max(255).required("Name is required"),email:x().email("Must be a valid email").max(255).required("Email is required"),password:x().max(255).required("Password is required")}),onSubmit:async(s,{setErrors:n,setStatus:o,setSubmitting:b})=>{event.preventDefault(),u(!0);try{const t=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});t.ok?(u(!1),v(!0)):(u(!1),C(await t.text()),k(!0))}catch{}},children:({errors:s,handleBlur:n,handleChange:o,handleSubmit:b,isSubmitting:t,touched:l,values:m})=>e.jsx("form",{noValidate:!0,onSubmit:b,children:e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{item:!0,xs:12,children:e.jsxs(i,{spacing:1,children:[e.jsx(p,{htmlFor:"name-register",children:a("sharedName")}),e.jsx(h,{required:!0,id:"name-register",onBlur:n,onChange:o,name:"name",value:m.name,autoComplete:"name",autoFocus:!0}),l.name&&s.name&&e.jsx(j,{error:!0,id:"standard-weight-helper-text-email-login",children:s.name})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(i,{spacing:1,children:[e.jsx(p,{htmlFor:"email-register",children:a("userEmail")}),e.jsx(h,{required:!0,id:"email-register",type:"email",value:m.email,name:"email",onBlur:n,onChange:o,placeholder:"Enter email address",fullWidth:!0,error:!!(l.email&&s.email)}),l.email&&s.email&&e.jsx(j,{error:!0,id:"standard-weight-helper-text-email-login",children:s.email})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(i,{spacing:1,children:[e.jsx(p,{htmlFor:"password-register",children:a("userPassword")}),e.jsx(h,{required:!0,id:"password-register",name:"password",value:m.password,type:c?"text":"password",autoComplete:"current-password",onBlur:n,onChange:o,endAdornment:e.jsx(L,{position:"end",children:e.jsx(T,{"aria-label":"toggle password visibility",onClick:F,onMouseDown:R,edge:"end",size:"large",children:c?e.jsx(M,{}):e.jsx(N,{})})})}),l.password&&s.password&&e.jsx(j,{error:!0,id:"standard-weight-helper-text-password-register",children:s.password})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(z,{children:e.jsx(V,{disableElevation:!0,disabled:t,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:O?e.jsx(W,{size:24}):a("loginRegister")})})}),w&&e.jsx(r,{item:!0,xs:12,children:e.jsx(i,{sx:{width:"100%"},spacing:2,children:e.jsx(G,{open:w,variant:"outlined",severity:"error",children:E})})})]})})}),e.jsx(H,{open:y,autoHideDuration:$,message:a("loginVerifiedCreated")})]})},X=()=>{const a=f();return e.jsx(g.Fragment,{children:e.jsx(J,{children:e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{item:!0,xs:12,children:e.jsxs(i,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:[e.jsx(S,{variant:"h3",children:a("loginRegister")}),e.jsx(S,{component:K,to:"/login",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:"Already have an account?"})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(Q,{})})]})})})};export{X as default};
