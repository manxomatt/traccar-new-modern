import{u as A,a as D,b as S,r as d,R as g,c as P,j as e,F as B,G as r,S as i,I as x,O as p,d as h,e as I,f as L,E as T,g as M,h as N,B as z,C as V,i as W,k as G,s as H,A as $,T as f,L as J}from"./index-Ri1NNcxb.js";import{c as K,a as j}from"./index.esm-BRoS7kCZ.js";const Q=()=>{A(),D();const a=S(),[y,v]=d.useState(!1),[w,k]=d.useState(!1),[E,C]=d.useState(""),[O,c]=d.useState(!1),[u,q]=g.useState(!1),F=()=>{q(!u)},R=s=>{s.preventDefault()};return P(s=>s.session.server),e.jsxs(g.Fragment,{children:[e.jsx(B,{initialValues:{name:"",email:"",password:""},validationSchema:K().shape({name:j().max(255).required("Name is required"),email:j().email("Must be a valid email").max(255).required("Email is required"),password:j().max(255).required("Password is required")}),onSubmit:async(s,{setErrors:n,setStatus:o,setSubmitting:b})=>{event.preventDefault(),c(!0);try{const t=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});t.ok?(c(!1),v(!0)):(c(!1),C(await t.text()),k(!0))}catch{}},children:({errors:s,handleBlur:n,handleChange:o,handleSubmit:b,isSubmitting:t,touched:l,values:m})=>e.jsx("form",{noValidate:!0,onSubmit:b,children:e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{item:!0,xs:12,children:e.jsxs(i,{spacing:1,children:[e.jsx(x,{htmlFor:"name-register",children:a("sharedName")}),e.jsx(p,{required:!0,id:"name-register",onBlur:n,onChange:o,name:"name",value:m.name,autoComplete:"name",autoFocus:!0}),l.name&&s.name&&e.jsx(h,{error:!0,id:"standard-weight-helper-text-email-login",children:s.name})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(i,{spacing:1,children:[e.jsx(x,{htmlFor:"email-register",children:a("userEmail")}),e.jsx(p,{required:!0,id:"email-register",type:"email",value:m.email,name:"email",onBlur:n,onChange:o,placeholder:"Enter email address",fullWidth:!0,error:!!(l.email&&s.email)}),l.email&&s.email&&e.jsx(h,{error:!0,id:"standard-weight-helper-text-email-login",children:s.email})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(i,{spacing:1,children:[e.jsx(x,{htmlFor:"password-register",children:a("userPassword")}),e.jsx(p,{required:!0,id:"password-register",name:"password",value:m.password,type:u?"text":"password",autoComplete:"current-password",onBlur:n,onChange:o,endAdornment:e.jsx(I,{position:"end",children:e.jsx(L,{"aria-label":"toggle password visibility",onClick:F,onMouseDown:R,edge:"end",size:"large",children:u?e.jsx(T,{}):e.jsx(M,{})})})}),l.password&&s.password&&e.jsx(h,{error:!0,id:"standard-weight-helper-text-password-register",children:s.password})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(N,{children:e.jsx(z,{disableElevation:!0,disabled:t,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:O?e.jsx(V,{size:24}):a("loginRegister")})})}),w&&e.jsx(r,{item:!0,xs:12,children:e.jsx(i,{sx:{width:"100%"},spacing:2,children:e.jsx(W,{open:w,variant:"outlined",severity:"error",children:E})})})]})})}),e.jsx(G,{open:y,autoHideDuration:H,message:a("loginVerifiedCreated")})]})},Y=()=>{const a=S();return e.jsx(g.Fragment,{children:e.jsx($,{children:e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{item:!0,xs:12,children:e.jsxs(i,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:[e.jsx(f,{variant:"h3",children:a("loginRegister")}),e.jsx(f,{component:J,to:"/login",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:"Already have an account?"})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(Q,{})})]})})})};export{Y as default};
