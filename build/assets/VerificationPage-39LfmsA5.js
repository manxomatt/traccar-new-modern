import{b as y,r as i,j as e,G as t,S as n,T as v,F as E,d as k,e as C,I as O,O as A,f as x,A as B,B as F,C as T,k as V,l as I,s as L}from"./index-McFj74y0.js";import"./AuthLogin-CWWujOMY.js";import{A as q}from"./AuthWrapper-EAMXQ9gO.js";const z=()=>{const l=y(),[o,h]=i.useState(!1),[j,f]=i.useState(""),[D,d]=i.useState(!1),[g,b]=i.useState(!1),[S,r]=i.useState(!1);return e.jsx(q,{children:e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(n,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:e.jsx(v,{variant:"h3",children:"Email Verification"})})}),e.jsxs(t,{item:!0,xs:12,children:[e.jsx(E,{initialValues:{email:""},validationSchema:k().shape({email:C().email("Must be a valid email").max(255).required("Email is required")}),onSubmit:async(s,{setErrors:u,setStatus:c,setSubmitting:m})=>{event.preventDefault(),r(!0),d(!1);try{const a=await fetch("/api/users/code/request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});a.ok?(r(!1),b(!0)):(r(!1),f(await a.text()),h(!0))}catch{d(!0)}},children:({errors:s,handleBlur:u,handleChange:c,handleSubmit:m,isSubmitting:a,touched:p,values:w})=>e.jsx("form",{noValidate:!0,onSubmit:m,autoComplete:"new-password",children:e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,children:e.jsxs(n,{spacing:1,children:[e.jsx(O,{htmlFor:"email-login",children:"Email Address"}),e.jsx(A,{id:"email-login",type:"email",value:w.email,name:"email",onBlur:u,onChange:c,placeholder:"Enter email address",fullWidth:!0,autoComplete:"new-password",autoFocus:!0,error:!!(p.email&&s.email)}),p.email&&s.email&&e.jsx(x,{error:!0,id:"standard-weight-helper-text-email-login",children:s.email})]})}),s.submit&&e.jsx(t,{item:!0,xs:12,children:e.jsx(x,{error:!0,children:s.submit})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(B,{children:e.jsx(F,{disableElevation:!0,disabled:a,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:S?e.jsx(T,{size:24}):l("sendEmail")})})}),o&&e.jsx(t,{item:!0,xs:12,children:e.jsx(n,{sx:{width:"100%"},spacing:2,children:e.jsx(V,{open:o,variant:"outlined",severity:"error",children:j})})})]})})}),e.jsx(I,{open:g,autoHideDuration:L,message:l("loginVerifiedCreated")})]})]})})};export{z as default};
