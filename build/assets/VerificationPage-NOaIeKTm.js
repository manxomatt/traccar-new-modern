import{b as y,r as i,j as e,A as v,G as t,S as n,T as E,F as k,I as C,O,d as x,h as A,B,C as F,i as T,k as V,s as I}from"./index-Ri1NNcxb.js";import"./AuthLogin-tTWQWPx3.js";import{c as L,a as q}from"./index.esm-BRoS7kCZ.js";const z=()=>{const l=y(),[o,h]=i.useState(!1),[j,f]=i.useState(""),[D,d]=i.useState(!1),[g,b]=i.useState(!1),[S,r]=i.useState(!1);return e.jsx(v,{children:e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(n,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:e.jsx(E,{variant:"h3",children:"Email Verification"})})}),e.jsxs(t,{item:!0,xs:12,children:[e.jsx(k,{initialValues:{email:""},validationSchema:L().shape({email:q().email("Must be a valid email").max(255).required("Email is required")}),onSubmit:async(a,{setErrors:u,setStatus:c,setSubmitting:m})=>{event.preventDefault(),r(!0),d(!1);try{const s=await fetch("/api/users/code/request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});s.ok?(r(!1),b(!0)):(r(!1),f(await s.text()),h(!0))}catch{d(!0)}},children:({errors:a,handleBlur:u,handleChange:c,handleSubmit:m,isSubmitting:s,touched:p,values:w})=>e.jsx("form",{noValidate:!0,onSubmit:m,autoComplete:"new-password",children:e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:12,children:e.jsxs(n,{spacing:1,children:[e.jsx(C,{htmlFor:"email-login",children:"Email Address"}),e.jsx(O,{id:"email-login",type:"email",value:w.email,name:"email",onBlur:u,onChange:c,placeholder:"Enter email address",fullWidth:!0,autoComplete:"new-password",autoFocus:!0,error:!!(p.email&&a.email)}),p.email&&a.email&&e.jsx(x,{error:!0,id:"standard-weight-helper-text-email-login",children:a.email})]})}),a.submit&&e.jsx(t,{item:!0,xs:12,children:e.jsx(x,{error:!0,children:a.submit})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(A,{children:e.jsx(B,{disableElevation:!0,disabled:s,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:S?e.jsx(F,{size:24}):l("sendEmail")})})}),o&&e.jsx(t,{item:!0,xs:12,children:e.jsx(n,{sx:{width:"100%"},spacing:2,children:e.jsx(T,{open:o,variant:"outlined",severity:"error",children:j})})})]})})}),e.jsx(V,{open:g,autoHideDuration:I,message:l("loginVerifiedCreated")})]})]})})};export{z as default};
