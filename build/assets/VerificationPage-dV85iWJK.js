import{b as y,r as i,j as e,A as v,G as s,S as n,T as E,F as k,d as C,e as O,I as A,O as B,f as x,k as F,B as T,C as V,l as I,m as L,s as q}from"./index-hU-576D2.js";import"./AuthLogin-n7eml-ew.js";const W=()=>{const l=y(),[o,h]=i.useState(!1),[j,f]=i.useState(""),[D,d]=i.useState(!1),[g,b]=i.useState(!1),[S,r]=i.useState(!1);return e.jsx(v,{children:e.jsxs(s,{container:!0,spacing:3,children:[e.jsx(s,{item:!0,xs:12,children:e.jsx(n,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:e.jsx(E,{variant:"h3",children:"Email Verification"})})}),e.jsxs(s,{item:!0,xs:12,children:[e.jsx(k,{initialValues:{email:""},validationSchema:C().shape({email:O().email("Must be a valid email").max(255).required("Email is required")}),onSubmit:async(t,{setErrors:u,setStatus:c,setSubmitting:m})=>{event.preventDefault(),r(!0),d(!1);try{const a=await fetch("/api/users/code/request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});a.ok?(r(!1),b(!0)):(r(!1),f(await a.text()),h(!0))}catch{d(!0)}},children:({errors:t,handleBlur:u,handleChange:c,handleSubmit:m,isSubmitting:a,touched:p,values:w})=>e.jsx("form",{noValidate:!0,onSubmit:m,autoComplete:"new-password",children:e.jsxs(s,{container:!0,spacing:3,children:[e.jsx(s,{item:!0,xs:12,children:e.jsxs(n,{spacing:1,children:[e.jsx(A,{htmlFor:"email-login",children:"Email Address"}),e.jsx(B,{id:"email-login",type:"email",value:w.email,name:"email",onBlur:u,onChange:c,placeholder:"Enter email address",fullWidth:!0,autoComplete:"new-password",autoFocus:!0,error:!!(p.email&&t.email)}),p.email&&t.email&&e.jsx(x,{error:!0,id:"standard-weight-helper-text-email-login",children:t.email})]})}),t.submit&&e.jsx(s,{item:!0,xs:12,children:e.jsx(x,{error:!0,children:t.submit})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(F,{children:e.jsx(T,{disableElevation:!0,disabled:a,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:S?e.jsx(V,{size:24}):l("sendEmail")})})}),o&&e.jsx(s,{item:!0,xs:12,children:e.jsx(n,{sx:{width:"100%"},spacing:2,children:e.jsx(I,{open:o,variant:"outlined",severity:"error",children:j})})})]})})}),e.jsx(L,{open:g,autoHideDuration:q,message:l("loginVerifiedCreated")})]})]})})};export{W as default};
